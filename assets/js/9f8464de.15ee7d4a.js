"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[8623],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(n),d=a,g=c["".concat(l,".").concat(d)]||c[d]||m[d]||r;return n?o.createElement(g,s(s({ref:t},u),{},{components:n})):o.createElement(g,s({ref:t},u))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[c]="string"==typeof e?e:a,s[1]=i;for(var p=2;p<r;p++)s[p]=n[p];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7937:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var o=n(7462),a=(n(7294),n(3905));const r={sidebar_position:9,title:"PostCSS",description:"Extend the PostCSS config and plugins added by Next.js with your own."},s=void 0,i={unversionedId:"pages/building-your-application/configuring/post-css",id:"pages/building-your-application/configuring/post-css",title:"PostCSS",description:"Extend the PostCSS config and plugins added by Next.js with your own.",source:"@site/docs/03-pages/01-building-your-application/06-configuring/09-post-css.mdx",sourceDirName:"03-pages/01-building-your-application/06-configuring",slug:"/pages/building-your-application/configuring/post-css",permalink:"/nano-nextjs-study/docs/pages/building-your-application/configuring/post-css",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-pages/01-building-your-application/06-configuring/09-post-css.mdx",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9,title:"PostCSS",description:"Extend the PostCSS config and plugins added by Next.js with your own."},sidebar:"tutorialSidebar",previous:{title:"Babel",permalink:"/nano-nextjs-study/docs/pages/building-your-application/configuring/babel"},next:{title:"Custom Server",permalink:"/nano-nextjs-study/docs/pages/building-your-application/configuring/custom-server"}},l={},p=[{value:"Default Behavior",id:"default-behavior",level:2},{value:"Customizing Target Browsers",id:"customizing-target-browsers",level:2},{value:"CSS Modules",id:"css-modules",level:2},{value:"Customizing Plugins",id:"customizing-plugins",level:2}],u={toc:p},c="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("details",{open:!0},(0,a.kt)("summary",null,"Examples"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/vercel/next.js/tree/canary/examples/with-tailwindcss"},"Tailwind CSS Example")))),(0,a.kt)("h2",{id:"default-behavior"},"Default Behavior"),(0,a.kt)("p",null,"Next.js compiles CSS for its ",(0,a.kt)("a",{parentName:"p",href:"/docs/pages/building-your-application/styling"},"built-in CSS support")," using PostCSS."),(0,a.kt)("p",null,"Out of the box, with no configuration, Next.js compiles CSS with the following transformations:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/postcss/autoprefixer"},"Autoprefixer")," automatically adds vendor prefixes to CSS rules (back to IE11)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/philipwalton/flexbugs"},"Cross-browser Flexbox bugs")," are corrected to behave like ",(0,a.kt)("a",{parentName:"li",href:"https://www.w3.org/TR/css-flexbox-1/"},"the spec"),"."),(0,a.kt)("li",{parentName:"ul"},"New CSS features are automatically compiled for Internet Explorer 11 compatibility:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/CSS/all"},(0,a.kt)("inlineCode",{parentName:"a"},"all")," Property")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/CSS/break-after"},"Break Properties")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/CSS/font-variant"},(0,a.kt)("inlineCode",{parentName:"a"},"font-variant")," Property")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/CSS/gap"},"Gap Properties")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/docs/Web/CSS/Media_Queries/Using_media_queries#Syntax_improvements_in_Level_4"},"Media Query Ranges"))))),(0,a.kt)("p",null,"By default, ",(0,a.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/css-grid-1/"},"CSS Grid")," and ",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/docs/Web/CSS/var"},"Custom Properties")," (CSS variables) are ",(0,a.kt)("strong",{parentName:"p"},"not compiled")," for IE11 support."),(0,a.kt)("p",null,"To compile ",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/docs/Web/CSS/grid"},"CSS Grid Layout")," for IE11, you can place the following comment at the top of your CSS file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css"},"/* autoprefixer grid: autoplace */\n")),(0,a.kt)("p",null,"You can also enable IE11 support for ",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/docs/Web/CSS/grid"},"CSS Grid Layout"),"\nin your entire project by configuring autoprefixer with the configuration shown below (collapsed).\nSee ",(0,a.kt)("a",{parentName:"p",href:"#customizing-plugins"},'"Customizing Plugins"')," below for more information."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Click to view the configuration to enable CSS Grid Layout"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename="postcss.config.json"',filename:'"postcss.config.json"'},'{\n    "plugins": [\n        "postcss-flexbugs-fixes",\n        [\n            "postcss-preset-env",\n            {\n                "autoprefixer": {\n                    "flexbox": "no-2009",\n                    "grid": "autoplace"\n                },\n                "stage": 3,\n                "features": {\n                    "custom-properties": false\n                }\n            }\n        ]\n    ]\n}\n'))),(0,a.kt)("p",null,"CSS variables are not compiled because it is ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/MadLittleMods/postcss-css-variables#caveats"},"not possible to safely do so"),".\nIf you must use variables, consider using something like ",(0,a.kt)("a",{parentName:"p",href:"https://sass-lang.com/documentation/variables"},"Sass variables")," which are compiled away by ",(0,a.kt)("a",{parentName:"p",href:"https://sass-lang.com/"},"Sass"),"."),(0,a.kt)("h2",{id:"customizing-target-browsers"},"Customizing Target Browsers"),(0,a.kt)("p",null,"Next.js allows you to configure the target browsers (for ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/postcss/autoprefixer"},"Autoprefixer")," and compiled css features) through ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/browserslist/browserslist"},"Browserslist"),"."),(0,a.kt)("p",null,"To customize browserslist, create a ",(0,a.kt)("inlineCode",{parentName:"p"},"browserslist")," key in your ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json")," like so:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename="package.json"',filename:'"package.json"'},'{\n    "browserslist": [">0.3%", "not dead", "not op_mini all"]\n}\n')),(0,a.kt)("p",null,"You can use the ",(0,a.kt)("a",{parentName:"p",href:"https://browsersl.ist/?q=%3E0.3%25%2C+not+ie+11%2C+not+dead%2C+not+op_mini+all"},"browsersl.ist")," tool to visualize what browsers you are targeting."),(0,a.kt)("h2",{id:"css-modules"},"CSS Modules"),(0,a.kt)("p",null,"No configuration is needed to support CSS Modules. To enable CSS Modules for a file, rename the file to have the extension ",(0,a.kt)("inlineCode",{parentName:"p"},".module.css"),"."),(0,a.kt)("p",null,"You can learn more about ",(0,a.kt)("a",{parentName:"p",href:"/docs/pages/building-your-application/styling"},"Next.js' CSS Module support here"),"."),(0,a.kt)("h2",{id:"customizing-plugins"},"Customizing Plugins"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Warning"),": When you define a custom PostCSS configuration file, Next.js ",(0,a.kt)("strong",{parentName:"p"},"completely disables")," the ",(0,a.kt)("a",{parentName:"p",href:"#default-behavior"},"default behavior"),".\nBe sure to manually configure all the features you need compiled, including ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/postcss/autoprefixer"},"Autoprefixer"),".\nYou also need to install any plugins included in your custom configuration manually, i.e. ",(0,a.kt)("inlineCode",{parentName:"p"},"npm install postcss-flexbugs-fixes postcss-preset-env"),".")),(0,a.kt)("p",null,"To customize the PostCSS configuration, create a ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss.config.json")," file in the root of your project."),(0,a.kt)("p",null,"This is the default configuration used by Next.js:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename="postcss.config.json"',filename:'"postcss.config.json"'},'{\n    "plugins": [\n        "postcss-flexbugs-fixes",\n        [\n            "postcss-preset-env",\n            {\n                "autoprefixer": {\n                    "flexbox": "no-2009"\n                },\n                "stage": 3,\n                "features": {\n                    "custom-properties": false\n                }\n            }\n        ]\n    ]\n}\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Good to know"),": Next.js also allows the file to be named ",(0,a.kt)("inlineCode",{parentName:"p"},".postcssrc.json"),", or, to be read from the ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss")," key in ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json"),".")),(0,a.kt)("p",null,"It is also possible to configure PostCSS with a ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss.config.js")," file, which is useful when you want to conditionally include plugins based on environment:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'filename="postcss.config.js"',filename:'"postcss.config.js"'},'module.exports = {\n    plugins:\n        process.env.NODE_ENV === "production"\n            ? [\n                    "postcss-flexbugs-fixes",\n                    [\n                        "postcss-preset-env",\n                        {\n                            autoprefixer: {\n                                flexbox: "no-2009",\n                            },\n                            stage: 3,\n                            features: {\n                                "custom-properties": false,\n                            },\n                        },\n                    ],\n              ]\n            : [\n                    // No transformations in development\n              ],\n};\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Good to know"),": Next.js also allows the file to be named ",(0,a.kt)("inlineCode",{parentName:"p"},".postcssrc.js"),".")),(0,a.kt)("p",null,"Do ",(0,a.kt)("strong",{parentName:"p"},"not use ",(0,a.kt)("inlineCode",{parentName:"strong"},"require()"))," to import the PostCSS Plugins. Plugins must be provided as strings."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Good to know"),": If your ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss.config.js")," needs to support other non-Next.js tools in the same project, you must use the interoperable object-based format instead:"),(0,a.kt)("pre",{parentName:"blockquote"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},'module.exports = {\n    plugins: {\n        "postcss-flexbugs-fixes": {},\n        "postcss-preset-env": {\n            autoprefixer: {\n                flexbox: "no-2009",\n            },\n            stage: 3,\n            features: {\n                "custom-properties": false,\n            },\n        },\n    },\n};\n'))))}m.isMDXComponent=!0}}]);