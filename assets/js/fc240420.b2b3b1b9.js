"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[9253],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=s(a),m=r,h=u["".concat(p,".").concat(m)]||u[m]||c[m]||o;return a?n.createElement(h,i(i({ref:t},d),{},{components:a})):n.createElement(h,i({ref:t},d))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2397:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var n=a(7462),r=(a(7294),a(3905));const o={title:"layout.js",description:"API reference for the layout.js file."},i=void 0,l={unversionedId:"app/api-reference/file-conventions/layout",id:"app/api-reference/file-conventions/layout",title:"layout.js",description:"API reference for the layout.js file.",source:"@site/docs/02-app/02-api-reference/02-file-conventions/layout.mdx",sourceDirName:"02-app/02-api-reference/02-file-conventions",slug:"/app/api-reference/file-conventions/layout",permalink:"/nano-nextjs-study/docs/app/api-reference/file-conventions/layout",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-app/02-api-reference/02-file-conventions/layout.mdx",tags:[],version:"current",frontMatter:{title:"layout.js",description:"API reference for the layout.js file."},sidebar:"tutorialSidebar",previous:{title:"error.js",permalink:"/nano-nextjs-study/docs/app/api-reference/file-conventions/error"},next:{title:"loading.js",permalink:"/nano-nextjs-study/docs/app/api-reference/file-conventions/loading"}},p={},s=[{value:"Props",id:"props",level:2},{value:"<code>children</code> (required)",id:"children-required",level:3},{value:"<code>params</code> (optional)",id:"params-optional",level:3},{value:"Good to know",id:"good-to-know",level:2},{value:"Layouts do not receive <code>searchParams</code>",id:"layouts-do-not-receive-searchparams",level:3},{value:"Root Layouts",id:"root-layouts",level:3},{value:"Version History",id:"version-history",level:2}],d={toc:s},u="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"A ",(0,r.kt)("strong",{parentName:"p"},"layout")," is UI that is shared between routes."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'filename="app/dashboard/layout.tsx" switcher',filename:'"app/dashboard/layout.tsx"',switcher:!0},"export default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return <section>{children}</section>\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'filename="app/dashboard/layout.js" switcher',filename:'"app/dashboard/layout.js"',switcher:!0},"export default function DashboardLayout({ children }) {\n  return <section>{children}</section>\n}\n")),(0,r.kt)("p",null,"A ",(0,r.kt)("strong",{parentName:"p"},"root layout")," is the top-most layout in the root ",(0,r.kt)("inlineCode",{parentName:"p"},"app")," directory. It is used to define the ",(0,r.kt)("inlineCode",{parentName:"p"},"<html>")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"<body>")," tags and other globally shared UI."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'filename="app/layout.tsx" switcher',filename:'"app/layout.tsx"',switcher:!0},'export default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang="en">\n      <body>{children}</body>\n    </html>\n  )\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'filename="app/layout.js" switcher',filename:'"app/layout.js"',switcher:!0},'export default function RootLayout({ children }) {\n  return (\n    <html lang="en">\n      <body>{children}</body>\n    </html>\n  )\n}\n')),(0,r.kt)("h2",{id:"props"},"Props"),(0,r.kt)("h3",{id:"children-required"},(0,r.kt)("inlineCode",{parentName:"h3"},"children")," (required)"),(0,r.kt)("p",null,"Layout components should accept and use a ",(0,r.kt)("inlineCode",{parentName:"p"},"children")," prop. During rendering, ",(0,r.kt)("inlineCode",{parentName:"p"},"children")," will be populated with the route segments the layout is wrapping. These will primarily be the component of a child ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/routing/pages-and-layouts#pages"},"Layout")," (if it exists) or ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/routing/pages-and-layouts#pages"},"Page"),", but could also be other special files like ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/routing/loading-ui-and-streaming"},"Loading")," or ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/routing/error-handling"},"Error")," when applicable."),(0,r.kt)("h3",{id:"params-optional"},(0,r.kt)("inlineCode",{parentName:"h3"},"params")," (optional)"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/routing/dynamic-routes"},"dynamic route parameters")," object from the root segment down to that layout."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Example"),(0,r.kt)("th",{parentName:"tr",align:null},"URL"),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"th"},"params")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"app/dashboard/[team]/layout.js")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"/dashboard/1")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{ team: '1' }"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"app/shop/[tag]/[item]/layout.js")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"/shop/1/2")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{ tag: '1', item: '2' }"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"app/blog/[...slug]/layout.js")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"/blog/1/2")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{ slug: ['1', '2'] }"))))),(0,r.kt)("p",null,"For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'filename="app/shop/[tag]/[item]/layout.tsx" switcher',filename:'"app/shop/[tag]/[item]/layout.tsx"',switcher:!0},"export default function ShopLayout({\n  children,\n  params,\n}: {\n  children: React.ReactNode\n  params: {\n    tag: string\n    item: string\n  }\n}) {\n  // URL -> /shop/shoes/nike-air-max-97\n  // `params` -> { tag: 'shoes', item: 'nike-air-max-97' }\n  return <section>{children}</section>\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'filename="app/shop/[tag]/[item]/layout.js" switcher',filename:'"app/shop/[tag]/[item]/layout.js"',switcher:!0},"export default function ShopLayout({ children, params }) {\n  // URL -> /shop/shoes/nike-air-max-97\n  // `params` -> { tag: 'shoes', item: 'nike-air-max-97' }\n  return <section>{children}</section>\n}\n")),(0,r.kt)("h2",{id:"good-to-know"},"Good to know"),(0,r.kt)("h3",{id:"layouts-do-not-receive-searchparams"},"Layouts do not receive ",(0,r.kt)("inlineCode",{parentName:"h3"},"searchParams")),(0,r.kt)("p",null,"Unlike ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/api-reference/file-conventions/page"},"Pages"),", Layout components ",(0,r.kt)("strong",{parentName:"p"},"do not")," receive the ",(0,r.kt)("inlineCode",{parentName:"p"},"searchParams")," prop. This is because a shared layout is ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/routing/linking-and-navigating#3-partial-rendering"},"not re-rendered during navigation")," which could lead to stale ",(0,r.kt)("inlineCode",{parentName:"p"},"searchParams")," between navigations."),(0,r.kt)("p",null,"When using client-side navigation, Next.js automatically only renders the part of the page below the common layout between two routes."),(0,r.kt)("p",null,"For example, in the following directory structure, ",(0,r.kt)("inlineCode",{parentName:"p"},"dashboard/layout.tsx")," is the common layout for both ",(0,r.kt)("inlineCode",{parentName:"p"},"/dashboard/settings")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"/dashboard/analytics"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-txt",metastring:"highight={3} hideLineNumbers",highight:"{3}",hideLineNumbers:!0},"app\n\u2514\u2500\u2500 dashboard\n    \u251c\u2500\u2500 layout.tsx\n    \u251c\u2500\u2500 settings\n    \u2502   \u2514\u2500\u2500 page.tsx\n    \u2514\u2500\u2500 analytics\n        \u2514\u2500\u2500 page.js\n")),(0,r.kt)("p",null,"When navigating from ",(0,r.kt)("inlineCode",{parentName:"p"},"/dashboard/settings")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"/dashboard/analytics"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"page.tsx")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"/dashboard/analytics")," will be rendered on the server because it is UI that changed, while ",(0,r.kt)("inlineCode",{parentName:"p"},"dashboard/layout.tsx")," will ",(0,r.kt)("strong",{parentName:"p"},"not")," be re-rendered because it is a common UI between the two routes."),(0,r.kt)("p",null,"This performance optimization allows navigation between pages that share a layout to be quicker as only the data fetching and rendering for the page has to run, instead of the entire route that could include shared layouts that fetch their own data."),(0,r.kt)("p",null,"Because ",(0,r.kt)("inlineCode",{parentName:"p"},"dashboard/layout.tsx")," doesn't re-render, the ",(0,r.kt)("inlineCode",{parentName:"p"},"searchParams")," prop in the layout Server Component might become ",(0,r.kt)("strong",{parentName:"p"},"stale")," after navigation."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Instead, use the Page ",(0,r.kt)("a",{parentName:"li",href:"/docs/app/api-reference/file-conventions/page#searchparams-optional"},(0,r.kt)("inlineCode",{parentName:"a"},"searchParams"))," prop or the ",(0,r.kt)("a",{parentName:"li",href:"/docs/app/api-reference/functions/use-search-params"},(0,r.kt)("inlineCode",{parentName:"a"},"useSearchParams"))," hook in a Client Component, which is re-rendered on the client with the latest ",(0,r.kt)("inlineCode",{parentName:"li"},"searchParams"),".")),(0,r.kt)("h3",{id:"root-layouts"},"Root Layouts"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"app")," directory ",(0,r.kt)("strong",{parentName:"li"},"must")," include a root ",(0,r.kt)("inlineCode",{parentName:"li"},"app/layout.js"),"."),(0,r.kt)("li",{parentName:"ul"},"The root layout ",(0,r.kt)("strong",{parentName:"li"},"must")," define ",(0,r.kt)("inlineCode",{parentName:"li"},"<html>")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"<body>")," tags.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"You should ",(0,r.kt)("strong",{parentName:"li"},"not")," manually add ",(0,r.kt)("inlineCode",{parentName:"li"},"<head>")," tags such as ",(0,r.kt)("inlineCode",{parentName:"li"},"<title>")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"<meta>")," to root layouts. Instead, you should use the ",(0,r.kt)("a",{parentName:"li",href:"/docs/app/api-reference/functions/generate-metadata"},"Metadata API")," which automatically handles advanced requirements such as streaming and de-duplicating ",(0,r.kt)("inlineCode",{parentName:"li"},"<head>")," elements."))),(0,r.kt)("li",{parentName:"ul"},"You can use ",(0,r.kt)("a",{parentName:"li",href:"/docs/app/building-your-application/routing/route-groups"},"route groups")," to create multiple root layouts.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Navigating ",(0,r.kt)("strong",{parentName:"li"},"across multiple root layouts")," will cause a ",(0,r.kt)("strong",{parentName:"li"},"full page load")," (as opposed to a client-side navigation). For example, navigating from ",(0,r.kt)("inlineCode",{parentName:"li"},"/cart")," that uses ",(0,r.kt)("inlineCode",{parentName:"li"},"app/(shop)/layout.js")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"/blog")," that uses ",(0,r.kt)("inlineCode",{parentName:"li"},"app/(marketing)/layout.js")," will cause a full page load. This ",(0,r.kt)("strong",{parentName:"li"},"only")," applies to multiple root layouts.")))),(0,r.kt)("h2",{id:"version-history"},"Version History"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Version"),(0,r.kt)("th",{parentName:"tr",align:null},"Changes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"v13.0.0")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"layout")," introduced.")))))}c.isMDXComponent=!0}}]);