"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[8641],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>f});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(a),d=r,f=p["".concat(s,".").concat(d)]||p[d]||m[d]||i;return a?n.createElement(f,o(o({ref:t},c),{},{components:a})):n.createElement(f,o({ref:t},c))}));function f(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=a[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},4176:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var n=a(7462),r=(a(7294),a(3905));const i={title:"images",description:"Custom configuration for the next/image loader"},o=void 0,l={unversionedId:"app/api-reference/next-config-js/images",id:"app/api-reference/next-config-js/images",title:"images",description:"Custom configuration for the next/image loader",source:"@site/docs/02-app/02-api-reference/05-next-config-js/images.mdx",sourceDirName:"02-app/02-api-reference/05-next-config-js",slug:"/app/api-reference/next-config-js/images",permalink:"/docs/app/api-reference/next-config-js/images",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-app/02-api-reference/05-next-config-js/images.mdx",tags:[],version:"current",frontMatter:{title:"images",description:"Custom configuration for the next/image loader"},sidebar:"tutorialSidebar",previous:{title:"httpAgentOptions",permalink:"/docs/app/api-reference/next-config-js/httpAgentOptions"},next:{title:"incrementalCacheHandlerPath",permalink:"/docs/app/api-reference/next-config-js/incrementalCacheHandlerPath"}},s={},u=[{value:"Example Loader Configuration",id:"example-loader-configuration",level:2},{value:"Akamai",id:"akamai",level:3},{value:"Cloudinary",id:"cloudinary",level:3},{value:"Cloudflare",id:"cloudflare",level:3},{value:"Contentful",id:"contentful",level:3},{value:"Fastly",id:"fastly",level:3},{value:"Gumlet",id:"gumlet",level:3},{value:"ImageEngine",id:"imageengine",level:3},{value:"Imgix",id:"imgix",level:3},{value:"Thumbor",id:"thumbor",level:3},{value:"Sanity",id:"sanity",level:3},{value:"Supabase",id:"supabase",level:3}],c={toc:u},p="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"{/",(0,r.kt)("em",{parentName:"p"}," The content of this doc is shared between the app and pages router. You can use the  component to add content that is specific to the Pages Router. Any shared content should not be wrapped in a component. "),"/}"),(0,r.kt)("p",null,"If you want to use a cloud provider to optimize images instead of using the Next.js built-in Image Optimization API, you can configure ",(0,r.kt)("inlineCode",{parentName:"p"},"next.config.js")," with the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'filename="next.config.js"',filename:'"next.config.js"'},'module.exports = {\n    images: {\n        loader: "custom",\n        loaderFile: "./my/image/loader.js",\n    },\n};\n')),(0,r.kt)("p",null,"This ",(0,r.kt)("inlineCode",{parentName:"p"},"loaderFile")," must point to a file relative to the root of your Next.js application. The file must export a default function that returns a string, for example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default function myImageLoader({ src, width, quality }) {\n    return `https://example.com/${src}?w=${width}&q=${quality || 75}`;\n}\n")),(0,r.kt)("p",null,"Alternatively, you can use the ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/api-reference/components/image#loader"},(0,r.kt)("inlineCode",{parentName:"a"},"loader")," prop")," to pass the function to each instance of ",(0,r.kt)("inlineCode",{parentName:"p"},"next/image"),"."),(0,r.kt)("h2",{id:"example-loader-configuration"},"Example Loader Configuration"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#akamai"},"Akamai")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#cloudinary"},"Cloudinary")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#cloudflare"},"Cloudflare")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#contentful"},"Contentful")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#fastly"},"Fastly")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#gumlet"},"Gumlet")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#imageengine"},"ImageEngine")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#imgix"},"Imgix")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#thumbor"},"Thumbor")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#sanity"},"Sanity")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#supabase"},"Supabase"))),(0,r.kt)("h3",{id:"akamai"},"Akamai"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Docs: https://techdocs.akamai.com/ivm/reference/test-images-on-demand\nexport default function akamaiLoader({ src, width, quality }) {\n    return `https://example.com/${src}?imwidth=${width}`;\n}\n")),(0,r.kt)("h3",{id:"cloudinary"},"Cloudinary"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Demo: https://res.cloudinary.com/demo/image/upload/w_300,c_limit,q_auto/turtles.jpg\nexport default function cloudinaryLoader({ src, width, quality }) {\n    const params = [\n        "f_auto",\n        "c_limit",\n        `w_${width}`,\n        `q_${quality || "auto"}`,\n    ];\n    return `https://example.com/${params.join(",")}${src}`;\n}\n')),(0,r.kt)("h3",{id:"cloudflare"},"Cloudflare"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Docs: https://developers.cloudflare.com/images/url-format\nexport default function cloudflareLoader({ src, width, quality }) {\n    const params = [\n        `width=${width}`,\n        `quality=${quality || 75}`,\n        "format=auto",\n    ];\n    return `https://example.com/cdn-cgi/image/${params.join(",")}/${src}`;\n}\n')),(0,r.kt)("h3",{id:"contentful"},"Contentful"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Docs: https://www.contentful.com/developers/docs/references/images-api/\nexport default function contentfulLoader({ src, width, quality }) {\n    const url = new URL(`https://example.com${src}`);\n    url.searchParams.set("fm", "webp");\n    url.searchParams.set("w", width.toString());\n    url.searchParams.set("q", (quality || 75).toString());\n    return url.href;\n}\n')),(0,r.kt)("h3",{id:"fastly"},"Fastly"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Docs: https://developer.fastly.com/reference/io/\nexport default function fastlyLoader({ src, width, quality }) {\n    const url = new URL(`https://example.com${src}`);\n    url.searchParams.set("auto", "webp");\n    url.searchParams.set("width", width.toString());\n    url.searchParams.set("quality", (quality || 75).toString());\n    return url.href;\n}\n')),(0,r.kt)("h3",{id:"gumlet"},"Gumlet"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Docs: https://docs.gumlet.com/reference/image-transform-size\nexport default function gumletLoader({ src, width, quality }) {\n    const url = new URL(`https://example.com${src}`);\n    url.searchParams.set("format", "auto");\n    url.searchParams.set("w", width.toString());\n    url.searchParams.set("q", (quality || 75).toString());\n    return url.href;\n}\n')),(0,r.kt)("h3",{id:"imageengine"},"ImageEngine"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Docs: https://support.imageengine.io/hc/en-us/articles/360058880672-Directives\nexport default function imageengineLoader({ src, width, quality }) {\n  const compression = 100 - (quality || 50)\n  const params = [`w_${width}`, `cmpr_${compression}`)]\n  return `https://example.com${src}?imgeng=/${params.join('/')`\n}\n")),(0,r.kt)("h3",{id:"imgix"},"Imgix"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Demo: https://static.imgix.net/daisy.png?format=auto&fit=max&w=300\nexport default function imgixLoader({ src, width, quality }) {\n    const url = new URL(`https://example.com${src}`);\n    const params = url.searchParams;\n    params.set("auto", params.getAll("auto").join(",") || "format");\n    params.set("fit", params.get("fit") || "max");\n    params.set("w", params.get("w") || width.toString());\n    params.set("q", (quality || 50).toString());\n    return url.href;\n}\n')),(0,r.kt)("h3",{id:"thumbor"},"Thumbor"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Docs: https://thumbor.readthedocs.io/en/latest/\nexport default function thumborLoader({ src, width, quality }) {\n    const params = [`${width}x0`, `filters:quality(${quality || 75})`];\n    return `https://example.com${params.join("/")}${src}`;\n}\n')),(0,r.kt)("h3",{id:"sanity"},"Sanity"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Docs: https://www.sanity.io/docs/image-urls\nexport default function sanityLoader({ src, width, quality }) {\n    const prj = "zp7mbokg";\n    const dataset = "production";\n    const url = new URL(`https://cdn.sanity.io/images/${prj}/${dataset}${src}`);\n    url.searchParams.set("auto", "format");\n    url.searchParams.set("fit", "max");\n    url.searchParams.set("w", width.toString());\n    if (quality) {\n        url.searchParams.set("q", quality.toString());\n    }\n    return url.href;\n}\n')),(0,r.kt)("h3",{id:"supabase"},"Supabase"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Docs: https://supabase.com/docs/guides/storage/image-transformations#nextjs-loader\nexport default function supabaseLoader({ src, width, quality }) {\n    const url = new URL(`https://example.com${src}`);\n    url.searchParams.set("width", width.toString());\n    url.searchParams.set("quality", (quality || 75).toString());\n    return url.href;\n}\n')))}m.isMDXComponent=!0}}]);