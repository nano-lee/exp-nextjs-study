"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[353],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),c=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=c(e.components);return o.createElement(p.Provider,{value:t},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=r,m=u["".concat(p,".").concat(d)]||u[d]||f[d]||a;return n?o.createElement(m,i(i({ref:t},l),{},{components:n})):o.createElement(m,i({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7914:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>f,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var o=n(7462),r=(n(7294),n(3905));const a={title:"assetPrefix",description:"Learn how to use the assetPrefix config option to configure your CDN."},i=void 0,s={unversionedId:"app/api-reference/next-config-js/assetPrefix",id:"app/api-reference/next-config-js/assetPrefix",title:"assetPrefix",description:"Learn how to use the assetPrefix config option to configure your CDN.",source:"@site/docs/02-app/02-api-reference/05-next-config-js/assetPrefix.mdx",sourceDirName:"02-app/02-api-reference/05-next-config-js",slug:"/app/api-reference/next-config-js/assetPrefix",permalink:"/docs/app/api-reference/next-config-js/assetPrefix",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-app/02-api-reference/05-next-config-js/assetPrefix.mdx",tags:[],version:"current",frontMatter:{title:"assetPrefix",description:"Learn how to use the assetPrefix config option to configure your CDN."},sidebar:"nextJsSidebar",previous:{title:"appDir",permalink:"/docs/app/api-reference/next-config-js/appDir"},next:{title:"basePath",permalink:"/docs/app/api-reference/next-config-js/basePath"}},p={},c=[],l={toc:c},u="wrapper";function f(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,o.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"{/",(0,r.kt)("em",{parentName:"p"}," The content of this doc is shared between the app and pages router. You can use the  component to add content that is specific to the Pages Router. Any shared content should not be wrapped in a component. "),"/}"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Attention"),": ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/deploying"},"Deploying to Vercel")," automatically configures a global CDN for your Next.js project.\nYou do not need to manually setup an Asset Prefix.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Good to know"),": Next.js 9.5+ added support for a customizable ",(0,r.kt)("a",{parentName:"p",href:"/docs/app/api-reference/next-config-js/basePath"},"Base Path"),", which is better\nsuited for hosting your application on a sub-path like ",(0,r.kt)("inlineCode",{parentName:"p"},"/docs"),".\nWe do not suggest you use a custom Asset Prefix for this use case.")),(0,r.kt)("p",null,"To set up a ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Content_delivery_network"},"CDN"),", you can set up an asset prefix and configure your CDN's origin to resolve to the domain that Next.js is hosted on."),(0,r.kt)("p",null,"Open ",(0,r.kt)("inlineCode",{parentName:"p"},"next.config.js")," and add the ",(0,r.kt)("inlineCode",{parentName:"p"},"assetPrefix")," config:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'filename="next.config.js"',filename:'"next.config.js"'},'const isProd = process.env.NODE_ENV === "production";\n\nmodule.exports = {\n    // Use the CDN in production and localhost for development.\n    assetPrefix: isProd ? "https://cdn.mydomain.com" : undefined,\n};\n')),(0,r.kt)("p",null,"Next.js will automatically use your asset prefix for the JavaScript and CSS files it loads from the ",(0,r.kt)("inlineCode",{parentName:"p"},"/_next/")," path (",(0,r.kt)("inlineCode",{parentName:"p"},".next/static/")," folder). For example, with the above configuration, the following request for a JS chunk:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/_next/static/chunks/4b9b41aaa062cbbfeff4add70f256968c51ece5d.4d708494b3aed70c04f0.js\n")),(0,r.kt)("p",null,"Would instead become:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://cdn.mydomain.com/_next/static/chunks/4b9b41aaa062cbbfeff4add70f256968c51ece5d.4d708494b3aed70c04f0.js\n")),(0,r.kt)("p",null,"The exact configuration for uploading your files to a given CDN will depend on your CDN of choice. The only folder you need to host on your CDN is the contents of ",(0,r.kt)("inlineCode",{parentName:"p"},".next/static/"),", which should be uploaded as ",(0,r.kt)("inlineCode",{parentName:"p"},"_next/static/")," as the above URL request indicates. ",(0,r.kt)("strong",{parentName:"p"},"Do not upload the rest of your ",(0,r.kt)("inlineCode",{parentName:"strong"},".next/")," folder"),", as you should not expose your server code and other configuration to the public."),(0,r.kt)("p",null,"While ",(0,r.kt)("inlineCode",{parentName:"p"},"assetPrefix")," covers requests to ",(0,r.kt)("inlineCode",{parentName:"p"},"_next/static"),", it does not influence the following paths:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Files in the ",(0,r.kt)("a",{parentName:"li",href:"/docs/app/building-your-application/optimizing/static-assets"},"public")," folder; if you want to serve those assets over a CDN, you'll have to introduce the prefix yourself")))}f.isMDXComponent=!0}}]);