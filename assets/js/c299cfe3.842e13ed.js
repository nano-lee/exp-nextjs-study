"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[3708],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),c=l(n),m=a,g=c["".concat(s,".").concat(m)]||c[m]||u[m]||i;return n?r.createElement(g,o(o({ref:t},d),{},{components:n})):r.createElement(g,o({ref:t},d))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p[c]="string"==typeof e?e:a,o[1]=p;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4444:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>p,toc:()=>l});var r=n(7462),a=(n(7294),n(3905));const i={title:"getServerSideProps",description:"API reference for `getServerSideProps`. Learn how to fetch data on each request with Next.js."},o=void 0,p={unversionedId:"pages/api-reference/functions/get-server-side-props",id:"pages/api-reference/functions/get-server-side-props",title:"getServerSideProps",description:"API reference for `getServerSideProps`. Learn how to fetch data on each request with Next.js.",source:"@site/docs/03-pages/02-api-reference/02-functions/get-server-side-props.mdx",sourceDirName:"03-pages/02-api-reference/02-functions",slug:"/pages/api-reference/functions/get-server-side-props",permalink:"/docs/pages/api-reference/functions/get-server-side-props",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-pages/02-api-reference/02-functions/get-server-side-props.mdx",tags:[],version:"current",frontMatter:{title:"getServerSideProps",description:"API reference for `getServerSideProps`. Learn how to fetch data on each request with Next.js."},sidebar:"nextJsSidebar",previous:{title:"getInitialProps",permalink:"/docs/pages/api-reference/functions/get-initial-props"},next:{title:"getStaticPaths",permalink:"/docs/pages/api-reference/functions/get-static-paths"}},s={},l=[{value:"Context parameter",id:"context-parameter",level:2},{value:"getServerSideProps return values",id:"getserversideprops-return-values",level:2},{value:"<code>props</code>",id:"props",level:3},{value:"<code>notFound</code>",id:"notfound",level:3},{value:"<code>redirect</code>",id:"redirect",level:3},{value:"Version History",id:"version-history",level:2}],d={toc:l},c="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"When exporting a function called ",(0,a.kt)("inlineCode",{parentName:"p"},"getServerSideProps")," (Server-Side Rendering) from a page, Next.js will pre-render this page on each request using the data returned by ",(0,a.kt)("inlineCode",{parentName:"p"},"getServerSideProps"),". This is useful if you want to fetch data that changes often, and have the page update to show the most current data."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'filename="pages/index.tsx" switcher',filename:'"pages/index.tsx"',switcher:!0},"import type { InferGetServerSidePropsType, GetServerSideProps } from 'next'\n\ntype Repo = {\n  name: string\n  stargazers_count: number\n}\n\nexport const getServerSideProps = (async (context) => {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js')\n  const repo = await res.json()\n  return { props: { repo } }\n}) satisfies GetServerSideProps<{\n  repo: Repo\n}>\n\nexport default function Page({\n  repo,\n}: InferGetServerSidePropsType<typeof getServerSideProps>) {\n  return repo.stargazers_count\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'filename="pages/index.js" switcher',filename:'"pages/index.js"',switcher:!0},"export async function getServerSideProps() {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js')\n  const repo = await res.json()\n  return { props: { repo } }\n}\n\nexport default function Page({ repo }) {\n  return repo.stargazers_count\n}\n")),(0,a.kt)("p",null,"You can import modules in top-level scope for use in ",(0,a.kt)("inlineCode",{parentName:"p"},"getServerSideProps"),". Imports used will ",(0,a.kt)("strong",{parentName:"p"},"not be bundled for the client-side"),". This means you can write ",(0,a.kt)("strong",{parentName:"p"},"server-side code directly in ",(0,a.kt)("inlineCode",{parentName:"strong"},"getServerSideProps")),", including fetching data from your database."),(0,a.kt)("h2",{id:"context-parameter"},"Context parameter"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"context")," parameter is an object containing the following keys:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"params")),(0,a.kt)("td",{parentName:"tr",align:null},"If this page uses a ",(0,a.kt)("a",{parentName:"td",href:"/docs/pages/building-your-application/routing/dynamic-routes"},"dynamic route"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"params")," contains the route parameters. If the page name is ",(0,a.kt)("inlineCode",{parentName:"td"},"[id].js"),", then ",(0,a.kt)("inlineCode",{parentName:"td"},"params")," will look like ",(0,a.kt)("inlineCode",{parentName:"td"},"{ id: ... }"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"req")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://nodejs.org/api/http.html#http_class_http_incomingmessage"},"The ",(0,a.kt)("inlineCode",{parentName:"a"},"HTTP")," IncomingMessage object"),", with an additional ",(0,a.kt)("inlineCode",{parentName:"td"},"cookies")," prop, which is an object with string keys mapping to string values of cookies.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"res")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://nodejs.org/api/http.html#http_class_http_serverresponse"},"The ",(0,a.kt)("inlineCode",{parentName:"a"},"HTTP")," response object"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"query")),(0,a.kt)("td",{parentName:"tr",align:null},"An object representing the query string, including dynamic route parameters.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"preview")),(0,a.kt)("td",{parentName:"tr",align:null},"(Deprecated for ",(0,a.kt)("inlineCode",{parentName:"td"},"draftMode"),") ",(0,a.kt)("inlineCode",{parentName:"td"},"preview")," is ",(0,a.kt)("inlineCode",{parentName:"td"},"true")," if the page is in the ",(0,a.kt)("a",{parentName:"td",href:"/docs/pages/building-your-application/configuring/preview-mode"},"Preview Mode")," and ",(0,a.kt)("inlineCode",{parentName:"td"},"false")," otherwise.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"previewData")),(0,a.kt)("td",{parentName:"tr",align:null},"(Deprecated for ",(0,a.kt)("inlineCode",{parentName:"td"},"draftMode"),") The ",(0,a.kt)("a",{parentName:"td",href:"/docs/pages/building-your-application/configuring/preview-mode"},"preview")," data set by ",(0,a.kt)("inlineCode",{parentName:"td"},"setPreviewData"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"draftMode")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"draftMode")," is ",(0,a.kt)("inlineCode",{parentName:"td"},"true")," if the page is in the ",(0,a.kt)("a",{parentName:"td",href:"/docs/pages/building-your-application/configuring/draft-mode"},"Draft Mode")," and ",(0,a.kt)("inlineCode",{parentName:"td"},"false")," otherwise.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"resolvedUrl")),(0,a.kt)("td",{parentName:"tr",align:null},"A normalized version of the request ",(0,a.kt)("inlineCode",{parentName:"td"},"URL")," that strips the ",(0,a.kt)("inlineCode",{parentName:"td"},"_next/data")," prefix for client transitions and includes original query values.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"locale")),(0,a.kt)("td",{parentName:"tr",align:null},"Contains the active locale (if enabled).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"locales")),(0,a.kt)("td",{parentName:"tr",align:null},"Contains all supported locales (if enabled).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"defaultLocale")),(0,a.kt)("td",{parentName:"tr",align:null},"Contains the configured default locale (if enabled).")))),(0,a.kt)("h2",{id:"getserversideprops-return-values"},"getServerSideProps return values"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"getServerSideProps")," function should return an object with ",(0,a.kt)("strong",{parentName:"p"},"any one of the following")," properties:"),(0,a.kt)("h3",{id:"props"},(0,a.kt)("inlineCode",{parentName:"h3"},"props")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"props")," object is a key-value pair, where each value is received by the page component. It should be a ",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/docs/Glossary/Serialization"},"serializable object")," so that any props passed, could be serialized with ",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"},(0,a.kt)("inlineCode",{parentName:"a"},"JSON.stringify")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"export async function getServerSideProps(context) {\n  return {\n    props: { message: `Next.js is awesome` }, // will be passed to the page component as props\n  }\n}\n")),(0,a.kt)("h3",{id:"notfound"},(0,a.kt)("inlineCode",{parentName:"h3"},"notFound")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"notFound")," boolean allows the page to return a ",(0,a.kt)("inlineCode",{parentName:"p"},"404")," status and ",(0,a.kt)("a",{parentName:"p",href:"/docs/pages/building-your-application/routing/custom-error#404-page"},"404 Page"),". With ",(0,a.kt)("inlineCode",{parentName:"p"},"notFound: true"),", the page will return a ",(0,a.kt)("inlineCode",{parentName:"p"},"404")," even if there was a successfully generated page before. This is meant to support use cases like user-generated content getting removed by its author."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export async function getServerSideProps(context) {\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  if (!data) {\n    return {\n      notFound: true,\n    }\n  }\n\n  return {\n    props: { data }, // will be passed to the page component as props\n  }\n}\n")),(0,a.kt)("h3",{id:"redirect"},(0,a.kt)("inlineCode",{parentName:"h3"},"redirect")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"redirect")," object allows redirecting to internal and external resources. It should match the shape of ",(0,a.kt)("inlineCode",{parentName:"p"},"{ destination: string, permanent: boolean }"),". In some rare cases, you might need to assign a custom status code for older ",(0,a.kt)("inlineCode",{parentName:"p"},"HTTP")," clients to properly redirect. In these cases, you can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"statusCode")," property instead of the ",(0,a.kt)("inlineCode",{parentName:"p"},"permanent")," property, but not both."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export async function getServerSideProps(context) {\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  if (!data) {\n    return {\n      redirect: {\n        destination: '/',\n        permanent: false,\n      },\n    }\n  }\n\n  return {\n    props: {}, // will be passed to the page component as props\n  }\n}\n")),(0,a.kt)("h2",{id:"version-history"},"Version History"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Version"),(0,a.kt)("th",{parentName:"tr",align:null},"Changes"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"v13.4.0")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/app/building-your-application/data-fetching"},"App Router")," is now stable with simplifed data fetching")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"v10.0.0")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"locale"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"locales"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"defaultLocale"),", and ",(0,a.kt)("inlineCode",{parentName:"td"},"notFound")," options added.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"v9.3.0")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"getServerSideProps")," introduced.")))))}u.isMDXComponent=!0}}]);