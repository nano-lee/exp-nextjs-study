"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[8328],{3905:(e,r,n)=>{n.d(r,{Zo:()=>c,kt:()=>m});var t=n(7294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function p(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=t.createContext({}),s=function(e){var r=t.useContext(l),n=r;return e&&(n="function"==typeof e?e(r):i(i({},r),e)),n},c=function(e){var r=s(e.components);return t.createElement(l.Provider,{value:r},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},g=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(n),g=o,m=u["".concat(l,".").concat(g)]||u[g]||d[g]||a;return n?t.createElement(m,i(i({ref:r},c),{},{components:n})):t.createElement(m,i({ref:r},c))}));function m(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=g;var p={};for(var l in r)hasOwnProperty.call(r,l)&&(p[l]=r[l]);p.originalType=e,p[u]="string"==typeof e?e:o,i[1]=p;for(var s=2;s<a;s++)i[s]=n[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}g.displayName="MDXCreateElement"},9765:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>p,toc:()=>s});var t=n(7462),o=(n(7294),n(3905));const a={sidebar_position:12,title:"Error Handling",description:"Handle errors in your Next.js app."},i=void 0,p={unversionedId:"pages/building-your-application/configuring/error-handling",id:"pages/building-your-application/configuring/error-handling",title:"Error Handling",description:"Handle errors in your Next.js app.",source:"@site/docs/03-pages/01-building-your-application/06-configuring/12-error-handling.mdx",sourceDirName:"03-pages/01-building-your-application/06-configuring",slug:"/pages/building-your-application/configuring/error-handling",permalink:"/docs/pages/building-your-application/configuring/error-handling",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-pages/01-building-your-application/06-configuring/12-error-handling.mdx",tags:[],version:"current",sidebarPosition:12,frontMatter:{sidebar_position:12,title:"Error Handling",description:"Handle errors in your Next.js app."},sidebar:"nextJsSidebar",previous:{title:"Draft Mode",permalink:"/docs/pages/building-your-application/configuring/draft-mode"},next:{title:"Debugging",permalink:"/docs/pages/building-your-application/configuring/debugging"}},l={},s=[{value:"Handling Errors in Development",id:"handling-errors-in-development",level:2},{value:"Handling Server Errors",id:"handling-server-errors",level:2},{value:"Handling Client Errors",id:"handling-client-errors",level:2},{value:"Reporting Errors",id:"reporting-errors",level:3}],c={toc:s},u="wrapper";function d(e){let{components:r,...n}=e;return(0,o.kt)(u,(0,t.Z)({},c,n,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This documentation explains how you can handle development, server-side, and client-side errors."),(0,o.kt)("h2",{id:"handling-errors-in-development"},"Handling Errors in Development"),(0,o.kt)("p",null,"When there is a runtime error during the development phase of your Next.js application, you will encounter an ",(0,o.kt)("strong",{parentName:"p"},"overlay"),". It is a modal that covers the webpage. It is ",(0,o.kt)("strong",{parentName:"p"},"only")," visible when the development server runs using ",(0,o.kt)("inlineCode",{parentName:"p"},"next dev")," via ",(0,o.kt)("inlineCode",{parentName:"p"},"pnpm dev"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run dev"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn dev"),", or ",(0,o.kt)("inlineCode",{parentName:"p"},"bun dev")," and will not be shown in production. Fixing the error will automatically dismiss the overlay."),(0,o.kt)("p",null,"Here is an example of an overlay:"),(0,o.kt)("p",null,"{/",(0,o.kt)("em",{parentName:"p"}," TODO UPDATE SCREENSHOT "),"/}\n",(0,o.kt)("img",{parentName:"p",src:"https://assets.vercel.com/image/upload/v1645118290/docs-assets/static/docs/error-handling/overlay.png",alt:"Example of an overlay when in development mode"})),(0,o.kt)("h2",{id:"handling-server-errors"},"Handling Server Errors"),(0,o.kt)("p",null,"Next.js provides a static 500 page by default to handle server-side errors that occur in your application. You can also ",(0,o.kt)("a",{parentName:"p",href:"/docs/pages/building-your-application/routing/custom-error#customizing-the-500-page"},"customize this page")," by creating a ",(0,o.kt)("inlineCode",{parentName:"p"},"pages/500.js")," file."),(0,o.kt)("p",null,"Having a 500 page in your application does not show specific errors to the app user."),(0,o.kt)("p",null,"You can also use ",(0,o.kt)("a",{parentName:"p",href:"/docs/pages/building-your-application/routing/custom-error#404-page"},"404 page")," to handle specific runtime error like ",(0,o.kt)("inlineCode",{parentName:"p"},"file not found"),"."),(0,o.kt)("h2",{id:"handling-client-errors"},"Handling Client Errors"),(0,o.kt)("p",null,"React ",(0,o.kt)("a",{parentName:"p",href:"https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary"},"Error Boundaries")," is a graceful way to handle a JavaScript error on the client so that the other parts of the application continue working. In addition to preventing the page from crashing, it allows you to provide a custom fallback component and even log error information."),(0,o.kt)("p",null,"To use Error Boundaries for your Next.js application, you must create a class component ",(0,o.kt)("inlineCode",{parentName:"p"},"ErrorBoundary")," and wrap the ",(0,o.kt)("inlineCode",{parentName:"p"},"Component")," prop in the ",(0,o.kt)("inlineCode",{parentName:"p"},"pages/_app.js")," file. This component will be responsible to:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Render a fallback UI after an error is thrown"),(0,o.kt)("li",{parentName:"ul"},"Provide a way to reset the Application's state"),(0,o.kt)("li",{parentName:"ul"},"Log error information")),(0,o.kt)("p",null,"You can create an ",(0,o.kt)("inlineCode",{parentName:"p"},"ErrorBoundary")," class component by extending ",(0,o.kt)("inlineCode",{parentName:"p"},"React.Component"),". For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'class ErrorBoundary extends React.Component {\n    constructor(props) {\n        super(props);\n\n        // Define a state variable to track whether is an error or not\n        this.state = { hasError: false };\n    }\n    static getDerivedStateFromError(error) {\n        // Update state so the next render will show the fallback UI\n\n        return { hasError: true };\n    }\n    componentDidCatch(error, errorInfo) {\n        // You can use your own error logging service here\n        console.log({ error, errorInfo });\n    }\n    render() {\n        // Check if the error is thrown\n        if (this.state.hasError) {\n            // You can render any custom fallback UI\n            return (\n                <div>\n                    <h2>Oops, there is an error!</h2>\n                    <button\n                        type="button"\n                        onClick={() => this.setState({ hasError: false })}\n                    >\n                        Try again?\n                    </button>\n                </div>\n            );\n        }\n\n        // Return children components in case of no error\n\n        return this.props.children;\n    }\n}\n\nexport default ErrorBoundary;\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"ErrorBoundary")," component keeps track of an ",(0,o.kt)("inlineCode",{parentName:"p"},"hasError")," state. The value of this state variable is a boolean. When the value of ",(0,o.kt)("inlineCode",{parentName:"p"},"hasError")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),", then the ",(0,o.kt)("inlineCode",{parentName:"p"},"ErrorBoundary")," component will render a fallback UI. Otherwise, it will render the children components."),(0,o.kt)("p",null,"After creating an ",(0,o.kt)("inlineCode",{parentName:"p"},"ErrorBoundary")," component, import it in the ",(0,o.kt)("inlineCode",{parentName:"p"},"pages/_app.js")," file to wrap the ",(0,o.kt)("inlineCode",{parentName:"p"},"Component")," prop in your Next.js application."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'// Import the ErrorBoundary component\nimport ErrorBoundary from "../components/ErrorBoundary";\n\nfunction MyApp({ Component, pageProps }) {\n    return (\n        // Wrap the Component prop with ErrorBoundary component\n        <ErrorBoundary>\n            <Component {...pageProps} />\n        </ErrorBoundary>\n    );\n}\n\nexport default MyApp;\n')),(0,o.kt)("p",null,"You can learn more about ",(0,o.kt)("a",{parentName:"p",href:"https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary"},"Error Boundaries")," in React's documentation."),(0,o.kt)("h3",{id:"reporting-errors"},"Reporting Errors"),(0,o.kt)("p",null,"To monitor client errors, use a service like ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/vercel/next.js/tree/canary/examples/with-sentry"},"Sentry"),", Bugsnag or Datadog."))}d.isMDXComponent=!0}}]);