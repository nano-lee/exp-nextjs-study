"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[9294],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>g});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},h=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(t),h=i,g=c["".concat(s,".").concat(h)]||c[h]||d[h]||o;return t?a.createElement(g,r(r({ref:n},u),{},{components:t})):a.createElement(g,r({ref:n},u))}));function g(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,r=new Array(o);r[0]=h;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[c]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<o;p++)r[p]=t[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}h.displayName="MDXCreateElement"},5136:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>g,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=t(7462),i=(t(7294),t(3905));const o={sidebar_position:3,title:"Linking and Navigating",description:"Learn how navigation works in Next.js, and how to use the Link Component and `useRouter` hook.",related:{links:["app/building-your-application/caching","app/building-your-application/configuring/typescript"]}},r=void 0,l={unversionedId:"app/building-your-application/routing/linking-and-navigating",id:"app/building-your-application/routing/linking-and-navigating",title:"Linking and Navigating",description:"Learn how navigation works in Next.js, and how to use the Link Component and `useRouter` hook.",source:"@site/docs/02-app/01-building-your-application/01-routing/03-linking-and-navigating.mdx",sourceDirName:"02-app/01-building-your-application/01-routing",slug:"/app/building-your-application/routing/linking-and-navigating",permalink:"/nano-nextjs-study/docs/app/building-your-application/routing/linking-and-navigating",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-app/01-building-your-application/01-routing/03-linking-and-navigating.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Linking and Navigating",description:"Learn how navigation works in Next.js, and how to use the Link Component and `useRouter` hook.",related:{links:["app/building-your-application/caching","app/building-your-application/configuring/typescript"]}},sidebar:"tutorialSidebar",previous:{title:"Pages and Layouts",permalink:"/nano-nextjs-study/docs/app/building-your-application/routing/pages-and-layouts"},next:{title:"Route Groups",permalink:"/nano-nextjs-study/docs/app/building-your-application/routing/route-groups"}},s={},p=[{value:"<code>&lt;Link&gt;</code> Component",id:"link-component",level:2},{value:"Examples",id:"examples",level:3},{value:"Linking to Dynamic Segments",id:"linking-to-dynamic-segments",level:4},{value:"Checking Active Links",id:"checking-active-links",level:4},{value:"Scrolling to an <code>id</code>",id:"scrolling-to-an-id",level:4},{value:"Disabling scroll restoration",id:"disabling-scroll-restoration",level:4},{value:"<code>useRouter()</code> Hook",id:"userouter-hook",level:2},{value:"How Routing and Navigation Works",id:"how-routing-and-navigation-works",level:2},{value:"1. Prefetching",id:"1-prefetching",level:3},{value:"2. Caching",id:"2-caching",level:3},{value:"3. Partial Rendering",id:"3-partial-rendering",level:3},{value:"4. Soft Navigation",id:"4-soft-navigation",level:3},{value:"5. Back and Forward Navigation",id:"5-back-and-forward-navigation",level:3}],u=(c="Image",function(e){return console.warn("Component "+c+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)});var c;const d={toc:p},h="wrapper";function g(e){let{components:n,...t}=e;return(0,i.kt)(h,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"There are two ways to navigate between routes in Next.js:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Using the ",(0,i.kt)("a",{parentName:"li",href:"#link-component"},(0,i.kt)("inlineCode",{parentName:"a"},"<Link>")," Component")),(0,i.kt)("li",{parentName:"ul"},"Using the ",(0,i.kt)("a",{parentName:"li",href:"#userouter-hook"},(0,i.kt)("inlineCode",{parentName:"a"},"useRouter")," Hook"))),(0,i.kt)("p",null,"This page will go through how to use ",(0,i.kt)("inlineCode",{parentName:"p"},"<Link>"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"useRouter()"),", and dive deeper into how navigation works."),(0,i.kt)("h2",{id:"link-component"},(0,i.kt)("inlineCode",{parentName:"h2"},"<Link>")," Component"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"<Link>")," is a built-in component that extends the HTML ",(0,i.kt)("inlineCode",{parentName:"p"},"<a>")," tag to provide ",(0,i.kt)("a",{parentName:"p",href:"#1-prefetching"},"prefetching")," and client-side navigation between routes. It is the primary way to navigate between routes in Next.js."),(0,i.kt)("p",null,"You can use it by importing it from ",(0,i.kt)("inlineCode",{parentName:"p"},"next/link"),", and passing a ",(0,i.kt)("inlineCode",{parentName:"p"},"href")," prop to the component:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'filename="app/page.tsx" switcher',filename:'"app/page.tsx"',switcher:!0},'import Link from "next/link";\n\nexport default function Page() {\n    return <Link href="/dashboard">Dashboard</Link>;\n}\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'filename="app/page.js" switcher',filename:'"app/page.js"',switcher:!0},'import Link from "next/link";\n\nexport default function Page() {\n    return <Link href="/dashboard">Dashboard</Link>;\n}\n')),(0,i.kt)("p",null,"There are other optional props you can pass to ",(0,i.kt)("inlineCode",{parentName:"p"},"<Link>"),". See the ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/api-reference/components/link"},"API reference")," for more."),(0,i.kt)("h3",{id:"examples"},"Examples"),(0,i.kt)("h4",{id:"linking-to-dynamic-segments"},"Linking to Dynamic Segments"),(0,i.kt)("p",null,"When linking to ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/routing/dynamic-routes"},"dynamic segments"),", you can use ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Template_literals"},"template literals and interpolation")," to generate a list of links. For example, to generate a list of blog posts:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'filename="app/blog/PostList.js"',filename:'"app/blog/PostList.js"'},'import Link from "next/link";\n\nexport default function PostList({ posts }) {\n    return (\n        <ul>\n            {posts.map((post) => (\n                <li key={post.id}>\n                    <Link href={`/blog/${post.slug}`}>{post.title}</Link>\n                </li>\n            ))}\n        </ul>\n    );\n}\n')),(0,i.kt)("h4",{id:"checking-active-links"},"Checking Active Links"),(0,i.kt)("p",null,"You can use ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/api-reference/functions/use-pathname"},(0,i.kt)("inlineCode",{parentName:"a"},"usePathname()"))," to determine if a link is active. For example, to add a class to the active link, you can check if the current ",(0,i.kt)("inlineCode",{parentName:"p"},"pathname")," matches the ",(0,i.kt)("inlineCode",{parentName:"p"},"href")," of the link:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'filename="app/components/links.tsx" switcher',filename:'"app/components/links.tsx"',switcher:!0},'"use client";\n\nimport { usePathname } from "next/navigation";\nimport Link from "next/link";\n\nexport function Links() {\n    const pathname = usePathname();\n\n    return (\n        <nav>\n            <ul>\n                <li>\n                    <Link\n                        className={`link ${pathname === "/" ? "active" : ""}`}\n                        href="/"\n                    >\n                        Home\n                    </Link>\n                </li>\n                <li>\n                    <Link\n                        className={`link ${\n                            pathname === "/about" ? "active" : ""\n                        }`}\n                        href="/about"\n                    >\n                        About\n                    </Link>\n                </li>\n            </ul>\n        </nav>\n    );\n}\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'filename="app/components/links.js" switcher',filename:'"app/components/links.js"',switcher:!0},'"use client";\n\nimport { usePathname } from "next/navigation";\nimport Link from "next/link";\n\nexport function Links() {\n    const pathname = usePathname();\n\n    return (\n        <nav>\n            <ul>\n                <li>\n                    <Link\n                        className={`link ${pathname === "/" ? "active" : ""}`}\n                        href="/"\n                    >\n                        Home\n                    </Link>\n                </li>\n                <li>\n                    <Link\n                        className={`link ${\n                            pathname === "/about" ? "active" : ""\n                        }`}\n                        href="/about"\n                    >\n                        About\n                    </Link>\n                </li>\n            </ul>\n        </nav>\n    );\n}\n')),(0,i.kt)("h4",{id:"scrolling-to-an-id"},"Scrolling to an ",(0,i.kt)("inlineCode",{parentName:"h4"},"id")),(0,i.kt)("p",null,"The default behavior of the Next.js App Router is to scroll to the top of a new route or to maintain the scroll position for backwards and forwards navigation."),(0,i.kt)("p",null,"If you'd like to scroll to a specific ",(0,i.kt)("inlineCode",{parentName:"p"},"id")," on navigation, you can append your URL with a ",(0,i.kt)("inlineCode",{parentName:"p"},"#")," hash link or just pass a hash link to the ",(0,i.kt)("inlineCode",{parentName:"p"},"href")," prop. This is possible since ",(0,i.kt)("inlineCode",{parentName:"p"},"<Link>")," renders to an ",(0,i.kt)("inlineCode",{parentName:"p"},"<a>")," element."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'<Link href="/dashboard#settings">Settings</Link>\n\n// Output\n<a href="/dashboard#settings">Settings</a>\n')),(0,i.kt)("h4",{id:"disabling-scroll-restoration"},"Disabling scroll restoration"),(0,i.kt)("p",null,"The default behavior of the Next.js App Router is to scroll to the top of a new route or to maintain the scroll position for backwards and forwards navigation. If you'd like to disable this behavior, you can pass ",(0,i.kt)("inlineCode",{parentName:"p"},"scroll={false}")," to the ",(0,i.kt)("inlineCode",{parentName:"p"},"<Link>")," component, or ",(0,i.kt)("inlineCode",{parentName:"p"},"scroll: false")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"router.push()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"router.replace()"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'// next/link\n<Link href="/dashboard" scroll={false}>\n    Dashboard\n</Link>\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'// useRouter\nimport { useRouter } from "next/navigation";\n\nconst router = useRouter();\n\nrouter.push("/dashboard", { scroll: false });\n')),(0,i.kt)("h2",{id:"userouter-hook"},(0,i.kt)("inlineCode",{parentName:"h2"},"useRouter()")," Hook"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"useRouter")," hook allows you to programmatically change routes."),(0,i.kt)("p",null,"This hook can only be used inside Client Components and is imported from ",(0,i.kt)("inlineCode",{parentName:"p"},"next/navigation"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'filename="app/page.js"',filename:'"app/page.js"'},'"use client";\n\nimport { useRouter } from "next/navigation";\n\nexport default function Page() {\n    const router = useRouter();\n\n    return (\n        <button type="button" onClick={() => router.push("/dashboard")}>\n            Dashboard\n        </button>\n    );\n}\n')),(0,i.kt)("p",null,"For a full list of ",(0,i.kt)("inlineCode",{parentName:"p"},"useRouter")," methods, see the ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/api-reference/functions/use-router"},"API reference"),"."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Recommendation:")," Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"<Link>")," component to navigate between routes unless you have a specific requirement for using ",(0,i.kt)("inlineCode",{parentName:"p"},"useRouter"),".")),(0,i.kt)("h2",{id:"how-routing-and-navigation-works"},"How Routing and Navigation Works"),(0,i.kt)("p",null,"The App Router uses a hybrid approach for routing and navigation. On the server, your application code is automatically code-split by route segments. And on the client, Next.js ",(0,i.kt)("a",{parentName:"p",href:"#1-prefetching"},"prefetches")," and ",(0,i.kt)("a",{parentName:"p",href:"#2-caching"},"caches")," the route segments. This means, when a user navigates to a new route, the browser doesn't reload the page, and only the route segments that change re-render - improving the navigation experience and performance."),(0,i.kt)("h3",{id:"1-prefetching"},"1. Prefetching"),(0,i.kt)("p",null,"Prefetching is a way to preload a route in the background before the user visits it."),(0,i.kt)("p",null,"There are two ways routes are prefetched in Next.js:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"<Link>")," component"),": Routes are automatically prefetched as they become visible in the user's viewport. Prefetching happens when the page first loads or when it comes into view through scrolling."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"router.prefetch()")),": The ",(0,i.kt)("inlineCode",{parentName:"li"},"useRouter")," hook can be used to prefetch routes programmatically.")),(0,i.kt)("p",null,"The",(0,i.kt)("inlineCode",{parentName:"p"},"<Link>"),"'s prefetching behavior is different for static and dynamic routes:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/app/building-your-application/rendering/server-components#static-rendering-default"},(0,i.kt)("strong",{parentName:"a"},"Static Routes")),": ",(0,i.kt)("inlineCode",{parentName:"li"},"prefetch")," defaults to ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),". The entire route is prefetched and cached."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/app/building-your-application/rendering/server-components#dynamic-rendering"},(0,i.kt)("strong",{parentName:"a"},"Dynamic Routes")),": ",(0,i.kt)("inlineCode",{parentName:"li"},"prefetch")," default to automatic. Only the shared layout down until the first ",(0,i.kt)("inlineCode",{parentName:"li"},"loading.js")," file is prefetched and cached for ",(0,i.kt)("inlineCode",{parentName:"li"},"30s"),". This reduces the cost of fetching an entire dynamic route, and it means you can show an ",(0,i.kt)("a",{parentName:"li",href:"/docs/app/building-your-application/routing/loading-ui-and-streaming#instant-loading-states"},"instant loading state")," for better visual feedback to users.")),(0,i.kt)("p",null,"You can disable prefetching by setting the ",(0,i.kt)("inlineCode",{parentName:"p"},"prefetch")," prop to ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,i.kt)("p",null,"See the ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/api-reference/components/link"},(0,i.kt)("inlineCode",{parentName:"a"},"<Link>")," API reference")," for more information."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Good to know"),":"),(0,i.kt)("ul",{parentName:"blockquote"},(0,i.kt)("li",{parentName:"ul"},"Prefetching is not enabled in development, only in production."))),(0,i.kt)("h3",{id:"2-caching"},"2. Caching"),(0,i.kt)("p",null,"Next.js has an ",(0,i.kt)("strong",{parentName:"p"},"in-memory client-side cache")," called the ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating#caching-data#router-cache"},"Router Cache"),". As users navigate around the app, the React Server Component Payload of ",(0,i.kt)("a",{parentName:"p",href:"#1-prefetching"},"prefetched")," route segments and visited routes are stored in the cache."),(0,i.kt)("p",null,"This means on navigation, the cache is reused as much as possible, instead of making a new request to the server - improving performance by reducing the number of requests and data transferred."),(0,i.kt)("p",null,"Learn more about how the ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating#caching-data"},"Router Cache")," works and how to configure it."),(0,i.kt)("h3",{id:"3-partial-rendering"},"3. Partial Rendering"),(0,i.kt)("p",null,"Partial rendering means only the route segments that change on navigation re-render on the client, and any shared segments are preserved."),(0,i.kt)("p",null,"For example, when navigating between two sibling routes, ",(0,i.kt)("inlineCode",{parentName:"p"},"/dashboard/settings")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"/dashboard/analytics"),", the ",(0,i.kt)("inlineCode",{parentName:"p"},"settings")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"analytics")," pages will be rendered, and the shared ",(0,i.kt)("inlineCode",{parentName:"p"},"dashboard")," layout will be preserved."),(0,i.kt)(u,{alt:"How partial rendering works",srcLight:"/docs/light/partial-rendering.png",srcDark:"/docs/dark/partial-rendering.png",width:"1600",height:"945",mdxType:"Image"}),(0,i.kt)("p",null,"Without partial rendering, each navigation would cause the full page to re-render on the server. Rendering only the segment that changes reduces the amount of data transferred and execution time, leading to improved performance."),(0,i.kt)("h3",{id:"4-soft-navigation"},"4. Soft Navigation"),(0,i.kt)("p",null,"By default, the browser performs a hard navigation between pages. This means the browser reloads the page and resets React state such as ",(0,i.kt)("inlineCode",{parentName:"p"},"useState")," hooks in your app and browser state such as the user's scroll position or focused element. However, in Next.js, the App Router uses soft navigation. This means React only renders the segments that have changed while preserving React and browser state, and there is no full page reload."),(0,i.kt)("h3",{id:"5-back-and-forward-navigation"},"5. Back and Forward Navigation"),(0,i.kt)("p",null,"By default, Next.js will maintain the scroll position for backwards and forwards navigation, and re-use route segments in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating#caching-data"},"Router Cache"),"."))}g.isMDXComponent=!0}}]);