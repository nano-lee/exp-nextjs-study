"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[3987],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=p(n),u=i,g=m["".concat(s,".").concat(u)]||m[u]||c[u]||r;return n?a.createElement(g,l(l({ref:t},d),{},{components:n})):a.createElement(g,l({ref:t},d))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2275:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>g,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={title:"ESLint",description:"Next.js provides an integrated ESLint experience by default. These conformance rules help you use Next.js in an optimal way."},l=void 0,o={unversionedId:"app/building-your-application/configuring/eslint",id:"app/building-your-application/configuring/eslint",title:"ESLint",description:"Next.js provides an integrated ESLint experience by default. These conformance rules help you use Next.js in an optimal way.",source:"@site/docs/02-app/01-building-your-application/07-configuring/02-eslint.mdx",sourceDirName:"02-app/01-building-your-application/07-configuring",slug:"/app/building-your-application/configuring/eslint",permalink:"/docs/app/building-your-application/configuring/eslint",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-app/01-building-your-application/07-configuring/02-eslint.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"ESLint",description:"Next.js provides an integrated ESLint experience by default. These conformance rules help you use Next.js in an optimal way."},sidebar:"nextJsSidebar",previous:{title:"TypeScript",permalink:"/docs/app/building-your-application/configuring/typescript"},next:{title:"Environment Variables",permalink:"/docs/app/building-your-application/configuring/environment-variables"}},s={},p=[{value:"ESLint Config",id:"eslint-config",level:2},{value:"ESLint Plugin",id:"eslint-plugin",level:2},{value:"Custom Settings",id:"custom-settings",level:3},{value:"<code>rootDir</code>",id:"rootdir",level:4},{value:"Linting Custom Directories and Files",id:"linting-custom-directories-and-files",level:2},{value:"Caching",id:"caching",level:2},{value:"Disabling Rules",id:"disabling-rules",level:2},{value:"Core Web Vitals",id:"core-web-vitals",level:3},{value:"Usage With Other Tools",id:"usage-with-other-tools",level:2},{value:"Prettier",id:"prettier",level:3},{value:"lint-staged",id:"lint-staged",level:3},{value:"Migrating Existing Config",id:"migrating-existing-config",level:2},{value:"Recommended Plugin Ruleset",id:"recommended-plugin-ruleset",level:3},{value:"Additional Configurations",id:"additional-configurations",level:3}],d=(m="Check",function(e){return console.warn("Component "+m+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)});var m;const c={toc:p},u="wrapper";function g(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"{/",(0,i.kt)("em",{parentName:"p"}," The content of this doc is shared between the app and pages router. You can use the  component to add content that is specific to the Pages Router. Any shared content should not be wrapped in a component. "),"/}"),(0,i.kt)("p",null,"Next.js provides an integrated ",(0,i.kt)("a",{parentName:"p",href:"https://eslint.org/"},"ESLint")," experience out of the box. Add ",(0,i.kt)("inlineCode",{parentName:"p"},"next lint")," as a script to ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename="package.json"',filename:'"package.json"'},'{\n    "scripts": {\n        "lint": "next lint"\n    }\n}\n')),(0,i.kt)("p",null,"Then run ",(0,i.kt)("inlineCode",{parentName:"p"},"npm run lint")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn lint"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'filename="Terminal"',filename:'"Terminal"'},"yarn lint\n")),(0,i.kt)("p",null,"If you don't already have ESLint configured in your application, you will be guided through the installation and configuration process."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'filename="Terminal"',filename:'"Terminal"'},"yarn lint\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"You'll see a prompt like this:"),(0,i.kt)("p",{parentName:"blockquote"},"? How would you like to configure ESLint?"),(0,i.kt)("p",{parentName:"blockquote"},"\u276f Strict (recommended)",(0,i.kt)("br",{parentName:"p"}),"\n","Base",(0,i.kt)("br",{parentName:"p"}),"\n","Cancel")),(0,i.kt)("p",null,"One of the following three options can be selected:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Strict"),": Includes Next.js' base ESLint configuration along with a stricter ",(0,i.kt)("a",{parentName:"p",href:"#core-web-vitals"},"Core Web Vitals rule-set"),". This is the recommended configuration for developers setting up ESLint for the first time."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename=".eslintrc.json"',filename:'".eslintrc.json"'},'{\n    "extends": "next/core-web-vitals"\n}\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Base"),": Includes Next.js' base ESLint configuration."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename=".eslintrc.json"',filename:'".eslintrc.json"'},'{\n    "extends": "next"\n}\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Cancel"),": Does not include any ESLint configuration. Only select this option if you plan on setting up your own custom ESLint configuration."))),(0,i.kt)("p",null,"If either of the two configuration options are selected, Next.js will automatically install ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-config-next")," as dependencies in your application and create an ",(0,i.kt)("inlineCode",{parentName:"p"},".eslintrc.json")," file in the root of your project that includes your selected configuration."),(0,i.kt)("p",null,"You can now run ",(0,i.kt)("inlineCode",{parentName:"p"},"next lint")," every time you want to run ESLint to catch errors. Once ESLint has been set up, it will also automatically run during every build (",(0,i.kt)("inlineCode",{parentName:"p"},"next build"),"). Errors will fail the build, while warnings will not."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"If you do not want ESLint to run during ",(0,i.kt)("inlineCode",{parentName:"p"},"next build"),", refer to the documentation for ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/api-reference/next-config-js/eslint"},"Ignoring ESLint"),".")),(0,i.kt)("p",null,"We recommend using an appropriate ",(0,i.kt)("a",{parentName:"p",href:"https://eslint.org/docs/user-guide/integrations#editors"},"integration")," to view warnings and errors directly in your code editor during development."),(0,i.kt)("h2",{id:"eslint-config"},"ESLint Config"),(0,i.kt)("p",null,"The default configuration (",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-config-next"),") includes everything you need to have an optimal out-of-the-box linting experience in Next.js. If you do not have ESLint already configured in your application, we recommend using ",(0,i.kt)("inlineCode",{parentName:"p"},"next lint")," to set up ESLint along with this configuration."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"If you would like to use ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-config-next")," along with other ESLint configurations, refer to the ",(0,i.kt)("a",{parentName:"p",href:"#additional-configurations"},"Additional Configurations")," section to learn how to do so without causing any conflicts.")),(0,i.kt)("p",null,"Recommended rule-sets from the following ESLint plugins are all used within ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-config-next"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/eslint-plugin-react"},(0,i.kt)("inlineCode",{parentName:"a"},"eslint-plugin-react"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/eslint-plugin-react-hooks"},(0,i.kt)("inlineCode",{parentName:"a"},"eslint-plugin-react-hooks"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/@next/eslint-plugin-next"},(0,i.kt)("inlineCode",{parentName:"a"},"eslint-plugin-next")))),(0,i.kt)("p",null,"This will take precedence over the configuration from ",(0,i.kt)("inlineCode",{parentName:"p"},"next.config.js"),"."),(0,i.kt)("h2",{id:"eslint-plugin"},"ESLint Plugin"),(0,i.kt)("p",null,"Next.js provides an ESLint plugin, ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@next/eslint-plugin-next"},(0,i.kt)("inlineCode",{parentName:"a"},"eslint-plugin-next")),", already bundled within the base configuration that makes it possible to catch common issues and problems in a Next.js application. The full set of rules is as follows:"),(0,i.kt)(d,{size:18,mdxType:"Check"})," Enabled in the recommended configuration",(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"}),(0,i.kt)("th",{parentName:"tr",align:null},"Rule"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/google-font-display"},"@next/next/google-font-display")),(0,i.kt)("td",{parentName:"tr",align:null},"Enforce font-display behavior with Google Fonts.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/google-font-preconnect"},"@next/next/google-font-preconnect")),(0,i.kt)("td",{parentName:"tr",align:null},"Ensure ",(0,i.kt)("inlineCode",{parentName:"td"},"preconnect")," is used with Google Fonts.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/inline-script-id"},"@next/next/inline-script-id")),(0,i.kt)("td",{parentName:"tr",align:null},"Enforce ",(0,i.kt)("inlineCode",{parentName:"td"},"id")," attribute on ",(0,i.kt)("inlineCode",{parentName:"td"},"next/script")," components with inline content.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/next-script-for-ga"},"@next/next/next-script-for-ga")),(0,i.kt)("td",{parentName:"tr",align:null},"Prefer ",(0,i.kt)("inlineCode",{parentName:"td"},"next/script")," component when using the inline script for Google Analytics.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-assign-module-variable"},"@next/next/no-assign-module-variable")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent assignment to the ",(0,i.kt)("inlineCode",{parentName:"td"},"module")," variable.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-async-client-component"},"@next/next/no-async-client-component")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent client components from being async functions.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-before-interactive-script-outside-document"},"@next/next/no-before-interactive-script-outside-document")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent usage of ",(0,i.kt)("inlineCode",{parentName:"td"},"next/script"),"'s ",(0,i.kt)("inlineCode",{parentName:"td"},"beforeInteractive")," strategy outside of ",(0,i.kt)("inlineCode",{parentName:"td"},"pages/_document.js"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-css-tags"},"@next/next/no-css-tags")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent manual stylesheet tags.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-document-import-in-page"},"@next/next/no-document-import-in-page")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent importing ",(0,i.kt)("inlineCode",{parentName:"td"},"next/document")," outside of ",(0,i.kt)("inlineCode",{parentName:"td"},"pages/_document.js"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-duplicate-head"},"@next/next/no-duplicate-head")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent duplicate usage of ",(0,i.kt)("inlineCode",{parentName:"td"},"<Head>")," in ",(0,i.kt)("inlineCode",{parentName:"td"},"pages/_document.js"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-head-element"},"@next/next/no-head-element")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent usage of ",(0,i.kt)("inlineCode",{parentName:"td"},"<head>")," element.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-head-import-in-document"},"@next/next/no-head-import-in-document")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent usage of ",(0,i.kt)("inlineCode",{parentName:"td"},"next/head")," in ",(0,i.kt)("inlineCode",{parentName:"td"},"pages/_document.js"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-html-link-for-pages"},"@next/next/no-html-link-for-pages")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent usage of ",(0,i.kt)("inlineCode",{parentName:"td"},"<a>")," elements to navigate to internal Next.js pages.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-img-element"},"@next/next/no-img-element")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent usage of ",(0,i.kt)("inlineCode",{parentName:"td"},"<img>")," element due to slower LCP and higher bandwidth.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-page-custom-font"},"@next/next/no-page-custom-font")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent page-only custom fonts.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-script-component-in-head"},"@next/next/no-script-component-in-head")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent usage of ",(0,i.kt)("inlineCode",{parentName:"td"},"next/script")," in ",(0,i.kt)("inlineCode",{parentName:"td"},"next/head")," component.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-styled-jsx-in-document"},"@next/next/no-styled-jsx-in-document")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent usage of ",(0,i.kt)("inlineCode",{parentName:"td"},"styled-jsx")," in ",(0,i.kt)("inlineCode",{parentName:"td"},"pages/_document.js"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-sync-scripts"},"@next/next/no-sync-scripts")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent synchronous scripts.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-title-in-document-head"},"@next/next/no-title-in-document-head")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent usage of ",(0,i.kt)("inlineCode",{parentName:"td"},"<title>")," with ",(0,i.kt)("inlineCode",{parentName:"td"},"Head")," component from ",(0,i.kt)("inlineCode",{parentName:"td"},"next/document"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},"@next/next/no-typos"),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent common typos in ",(0,i.kt)("a",{parentName:"td",href:"/docs/pages/building-your-application/data-fetching"},"Next.js's data fetching functions"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)(d,{size:18,mdxType:"Check"})),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/messages/no-unwanted-polyfillio"},"@next/next/no-unwanted-polyfillio")),(0,i.kt)("td",{parentName:"tr",align:null},"Prevent duplicate polyfills from Polyfill.io.")))),(0,i.kt)("p",null,"If you already have ESLint configured in your application, we recommend extending from this plugin directly instead of including ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-config-next")," unless a few conditions are met. Refer to the ",(0,i.kt)("a",{parentName:"p",href:"#recommended-plugin-ruleset"},"Recommended Plugin Ruleset")," to learn more."),(0,i.kt)("h3",{id:"custom-settings"},"Custom Settings"),(0,i.kt)("h4",{id:"rootdir"},(0,i.kt)("inlineCode",{parentName:"h4"},"rootDir")),(0,i.kt)("p",null,"If you're using ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-plugin-next")," in a project where Next.js isn't installed in your root directory (such as a monorepo), you can tell ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-plugin-next")," where to find your Next.js application using the ",(0,i.kt)("inlineCode",{parentName:"p"},"settings")," property in your ",(0,i.kt)("inlineCode",{parentName:"p"},".eslintrc"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename=".eslintrc.json"',filename:'".eslintrc.json"'},'{\n    "extends": "next",\n    "settings": {\n        "next": {\n            "rootDir": "packages/my-app/"\n        }\n    }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"rootDir")," can be a path (relative or absolute), a glob (i.e. ",(0,i.kt)("inlineCode",{parentName:"p"},'"packages/*/"'),"), or an array of paths and/or globs."),(0,i.kt)("h2",{id:"linting-custom-directories-and-files"},"Linting Custom Directories and Files"),(0,i.kt)("p",null,"By default, Next.js will run ESLint for all files in the ",(0,i.kt)("inlineCode",{parentName:"p"},"pages/"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"app/"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"components/"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"lib/"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"src/")," directories. However, you can specify which directories using the ",(0,i.kt)("inlineCode",{parentName:"p"},"dirs")," option in the ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint")," config in ",(0,i.kt)("inlineCode",{parentName:"p"},"next.config.js")," for production builds:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'filename="next.config.js"',filename:'"next.config.js"'},"module.exports = {\n    eslint: {\n        dirs: [\"pages\", \"utils\"], // Only run ESLint on the 'pages' and 'utils' directories during production builds (next build)\n    },\n};\n")),(0,i.kt)("p",null,"Similarly, the ",(0,i.kt)("inlineCode",{parentName:"p"},"--dir")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"--file")," flags can be used for ",(0,i.kt)("inlineCode",{parentName:"p"},"next lint")," to lint specific directories and files:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'filename="Terminal"',filename:'"Terminal"'},"next lint --dir pages --dir utils --file bar.js\n")),(0,i.kt)("h2",{id:"caching"},"Caching"),(0,i.kt)("p",null,"To improve performance, information of files processed by ESLint are cached by default. This is stored in ",(0,i.kt)("inlineCode",{parentName:"p"},".next/cache")," or in your defined ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/api-reference/next-config-js/distDir"},"build directory"),". If you include any ESLint rules that depend on more than the contents of a single source file and need to disable the cache, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"--no-cache")," flag with ",(0,i.kt)("inlineCode",{parentName:"p"},"next lint"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'filename="Terminal"',filename:'"Terminal"'},"next lint --no-cache\n")),(0,i.kt)("h2",{id:"disabling-rules"},"Disabling Rules"),(0,i.kt)("p",null,"If you would like to modify or disable any rules provided by the supported plugins (",(0,i.kt)("inlineCode",{parentName:"p"},"react"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"react-hooks"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"next"),"), you can directly change them using the ",(0,i.kt)("inlineCode",{parentName:"p"},"rules")," property in your ",(0,i.kt)("inlineCode",{parentName:"p"},".eslintrc"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename=".eslintrc.json"',filename:'".eslintrc.json"'},'{\n    "extends": "next",\n    "rules": {\n        "react/no-unescaped-entities": "off",\n        "@next/next/no-page-custom-font": "off"\n    }\n}\n')),(0,i.kt)("h3",{id:"core-web-vitals"},"Core Web Vitals"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"next/core-web-vitals")," rule set is enabled when ",(0,i.kt)("inlineCode",{parentName:"p"},"next lint")," is run for the first time and the ",(0,i.kt)("strong",{parentName:"p"},"strict")," option is selected."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename=".eslintrc.json"',filename:'".eslintrc.json"'},'{\n    "extends": "next/core-web-vitals"\n}\n')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"next/core-web-vitals")," updates ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-plugin-next")," to error on a number of rules that are warnings by default if they affect ",(0,i.kt)("a",{parentName:"p",href:"https://web.dev/vitals/"},"Core Web Vitals"),"."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"next/core-web-vitals")," entry point is automatically included for new applications built with ",(0,i.kt)("a",{parentName:"p",href:"/docs/app/api-reference/create-next-app"},"Create Next App"),".")),(0,i.kt)("h2",{id:"usage-with-other-tools"},"Usage With Other Tools"),(0,i.kt)("h3",{id:"prettier"},"Prettier"),(0,i.kt)("p",null,"ESLint also contains code formatting rules, which can conflict with your existing ",(0,i.kt)("a",{parentName:"p",href:"https://prettier.io/"},"Prettier")," setup. We recommend including ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/prettier/eslint-config-prettier"},"eslint-config-prettier")," in your ESLint config to make ESLint and Prettier work together."),(0,i.kt)("p",null,"First, install the dependency:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'filename="Terminal"',filename:'"Terminal"'},"npm install --save-dev eslint-config-prettier\n\nyarn add --dev eslint-config-prettier\n\npnpm add --save-dev eslint-config-prettier\n\nbun add --dev eslint-config-prettier\n")),(0,i.kt)("p",null,"Then, add ",(0,i.kt)("inlineCode",{parentName:"p"},"prettier")," to your existing ESLint config:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename=".eslintrc.json"',filename:'".eslintrc.json"'},'{\n    "extends": ["next", "prettier"]\n}\n')),(0,i.kt)("h3",{id:"lint-staged"},"lint-staged"),(0,i.kt)("p",null,"If you would like to use ",(0,i.kt)("inlineCode",{parentName:"p"},"next lint")," with ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/okonet/lint-staged"},"lint-staged")," to run the linter on staged git files, you'll have to add the following to the ",(0,i.kt)("inlineCode",{parentName:"p"},".lintstagedrc.js")," file in the root of your project in order to specify usage of the ",(0,i.kt)("inlineCode",{parentName:"p"},"--file")," flag."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'filename=".lintstagedrc.js"',filename:'".lintstagedrc.js"'},'const path = require("path");\n\nconst buildEslintCommand = (filenames) =>\n    `next lint --fix --file ${filenames\n        .map((f) => path.relative(process.cwd(), f))\n        .join(" --file ")}`;\n\nmodule.exports = {\n    "*.{js,jsx,ts,tsx}": [buildEslintCommand],\n};\n')),(0,i.kt)("h2",{id:"migrating-existing-config"},"Migrating Existing Config"),(0,i.kt)("h3",{id:"recommended-plugin-ruleset"},"Recommended Plugin Ruleset"),(0,i.kt)("p",null,"If you already have ESLint configured in your application and any of the following conditions are true:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You have one or more of the following plugins already installed (either separately or through a different config such as ",(0,i.kt)("inlineCode",{parentName:"li"},"airbnb")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"react-app"),"):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"react")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"react-hooks")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"jsx-a11y")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"import")))),(0,i.kt)("li",{parentName:"ul"},"You've defined specific ",(0,i.kt)("inlineCode",{parentName:"li"},"parserOptions")," that are different from how Babel is configured within Next.js (this is not recommended unless you have ",(0,i.kt)("a",{parentName:"li",href:"/docs/pages/building-your-application/configuring/babel"},"customized your Babel configuration"),")"),(0,i.kt)("li",{parentName:"ul"},"You have ",(0,i.kt)("inlineCode",{parentName:"li"},"eslint-plugin-import")," installed with Node.js and/or TypeScript ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/benmosher/eslint-plugin-import#resolvers"},"resolvers")," defined to handle imports")),(0,i.kt)("p",null,"Then we recommend either removing these settings if you prefer how these properties have been configured within ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/vercel/next.js/blob/canary/packages/eslint-config-next/index.js"},(0,i.kt)("inlineCode",{parentName:"a"},"eslint-config-next"))," or extending directly from the Next.js ESLint plugin instead:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'module.exports = {\n    extends: [\n        //...\n        "plugin:@next/next/recommended",\n    ],\n};\n')),(0,i.kt)("p",null,"The plugin can be installed normally in your project without needing to run ",(0,i.kt)("inlineCode",{parentName:"p"},"next lint"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'filename="Terminal"',filename:'"Terminal"'},"npm install --save-dev @next/eslint-plugin-next\n\nyarn add --dev @next/eslint-plugin-next\n\npnpm add --save-dev @next/eslint-plugin-next\n\nbun add --dev @next/eslint-plugin-next\n")),(0,i.kt)("p",null,"This eliminates the risk of collisions or errors that can occur due to importing the same plugin or parser across multiple configurations."),(0,i.kt)("h3",{id:"additional-configurations"},"Additional Configurations"),(0,i.kt)("p",null,"If you already use a separate ESLint configuration and want to include ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-config-next"),", ensure that it is extended last after other configurations. For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'filename=".eslintrc.json"',filename:'".eslintrc.json"'},'{\n    "extends": ["eslint:recommended", "next"]\n}\n')),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"next")," configuration already handles setting default values for the ",(0,i.kt)("inlineCode",{parentName:"p"},"parser"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"plugins")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"settings")," properties. There is no need to manually re-declare any of these properties unless you need a different configuration for your use case."),(0,i.kt)("p",null,"If you include any other shareable configurations, ",(0,i.kt)("strong",{parentName:"p"},"you will need to make sure that these properties are not overwritten or modified"),". Otherwise, we recommend removing any configurations that share behavior with the ",(0,i.kt)("inlineCode",{parentName:"p"},"next")," configuration or extending directly from the Next.js ESLint plugin as mentioned above."))}g.isMDXComponent=!0}}]);